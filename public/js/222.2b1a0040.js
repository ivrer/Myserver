"use strict";(self["webpackChunkmy_shp"]=self["webpackChunkmy_shp"]||[]).push([[222],{7222:function(e,a,t){t.r(a),t.d(a,{default:function(){return X}});var s=t(3396),i=t(7139);const l=e=>((0,s.dD)("data-v-4ac341e7"),e=e(),(0,s.Cn)(),e),o={class:"preview-container",ref:"nodeContainer"},d={class:"preview"},c=["src"],r={class:"huge",ref:"NodeHuge"},n={class:"hugeImg",ref:"nodeHugeImg"},u={class:"list"},v=l((()=>(0,s._)("i",{class:"iconfont icon-biaoqing"},null,-1))),m=[v],g={class:"img-wrap"},p=["src"],f=l((()=>(0,s._)("i",{class:"iconfont icon-dibudaohanglan-"},null,-1))),h=[f],y={class:"info"},_={class:"name"},I=l((()=>(0,s._)("img",{src:"https://img13.360buyimg.com/devfe/jfs/t4636/72/1687629000/219/64a7daf7/58e44c0fN9f20107c.png",alt:""},null,-1))),b=l((()=>(0,s._)("div",{class:"atomsphere"},[(0,s._)("div",{id:"J_atmosphere_banner",class:"activity-banner",style:{background:"url(//img30.360buyimg.com/jdg/jfs/t1/117841/7/33100/6895/63a1228dEff3ca52b/85faf5eb4ebb4d7f.png) 0 0 no-repeat"}})],-1))),w={class:"summary-price-wrap"},k=(0,s.uE)('<div class="summary-price" data-v-4ac341e7><div class="dt" data-v-4ac341e7>京 东 价</div><div class="dd" data-v-4ac341e7><div class="price" data-v-4ac341e7><span data-v-4ac341e7><span data-v-4ac341e7>¥</span><span data-v-4ac341e7>2399</span></span><a href="" data-v-4ac341e7>降价通知</a></div></div></div><div class="summary-top" data-v-4ac341e7><div class="dt" data-v-4ac341e7>促销</div><div class="dd" data-v-4ac341e7><div class="activity" data-v-4ac341e7><div class="prom" data-v-4ac341e7><em class="activity-item" data-v-4ac341e7>满减</em><em class="activity-info" data-v-4ac341e7>每满2000元，可减100现金</em></div></div></div></div><div class="summary-comment" data-v-4ac341e7><p data-v-4ac341e7>累计评价</p><p class="count" data-v-4ac341e7>10万+</p></div>',3),C={class:"choose"},A={class:"summary-address"},H=l((()=>(0,s._)("div",{class:"dt"},"配送至 ",-1))),L={class:"dd"},D=(0,s.uE)('<div class="summary-self" data-v-4ac341e7><div class="dt" data-v-4ac341e7></div><div class="dd" data-v-4ac341e7><div class="icon-el" data-v-4ac341e7>京东物流</div><div class="ways" data-v-4ac341e7><a href="" data-v-4ac341e7>预约送货</a><a href="" data-v-4ac341e7>部分收货</a><a href="" data-v-4ac341e7>送货上门</a><a href="" data-v-4ac341e7>自提</a></div></div></div><div class="summary-supply" data-v-4ac341e7><div class="dt" data-v-4ac341e7></div><div class="dd" data-v-4ac341e7><div data-v-4ac341e7> 由 <span data-v-4ac341e7>京东物流</span> 发货，在23：00之前，预计到达时间为 <b data-v-4ac341e7>3月03日</b></div></div></div>',2),S={key:0,class:"choose-attrs"},z={class:"choose-attr-1"},x={class:"dt"},N={class:"dd"},U=["onClick","data-skuId"],j=["data-skuId"],P=["src"],E=(0,s.uE)('<div class="choose-pay" data-v-4ac341e7><div class="dt" data-v-4ac341e7>付款方式</div><div class="dd" data-v-4ac341e7><div class="item" data-v-4ac341e7><a data-v-4ac341e7><strong data-v-4ac341e7>¥506.00 x 3期</strong></a></div><div class="item" data-v-4ac341e7><a data-v-4ac341e7><strong data-v-4ac341e7>¥506.00 x 3期</strong></a></div><div class="item" data-v-4ac341e7><a data-v-4ac341e7><strong data-v-4ac341e7>¥506.00 x 3期</strong></a></div><div class="item" data-v-4ac341e7><a data-v-4ac341e7><strong data-v-4ac341e7>¥506.00 x 3期</strong></a></div></div></div>',1),W={class:"choose-btn"},Y={class:"input-wrap"},B=l((()=>(0,s._)("i",{class:"iconfont icon-chenggong animate__animated"},null,-1))),F={ref:"nodeSpan"},Z=l((()=>(0,s._)("div",{class:"summary-tips"},[(0,s._)("div",{class:"dt"},"温馨提示"),(0,s._)("div",{class:"dd"},[(0,s._)("div",{class:"item"},"支持七天无理由退款")])],-1)));function q(e,a,t,l,v,f){const q=(0,s.up)("Mini-address"),J=(0,s.up)("el-input-number");return(0,s.wg)(),(0,s.iD)("div",o,[(0,s._)("div",d,[(0,s._)("div",{class:"zoom",ref:"Nodezoom",onMousemove:a[0]||(a[0]=e=>l.getHuge(e)),onMouseout:a[1]||(a[1]=e=>l.outHuge(e))},[(0,s._)("img",{id:"zoomImg",class:"zoomImg",src:l.zoomList[0].img,alt:"",srcset:""},null,8,c),(0,s._)("div",r,null,512)],544),(0,s._)("div",n,null,512),(0,s._)("div",u,[(0,s._)("a",{href:"javascript:void(0);",class:"goNextImg",onClick:a[2]||(a[2]=(...e)=>l.goNextImg&&l.goNextImg(...e))},m),(0,s._)("div",g,[(0,s._)("ul",{class:"img-ul",ref:"imgUl",onMouseover:a[3]||(a[3]=(...e)=>l.getZoomImg&&l.getZoomImg(...e))},[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.zoomList,((e,a)=>((0,s.wg)(),(0,s.iD)("li",null,[(0,s._)("img",{src:e.img,alt:""},null,8,p)])))),256))],544)]),(0,s._)("a",{href:"javascript:void(0);",class:"goBeforeImg",onClick:a[4]||(a[4]=(...e)=>l.goBeforeImg&&l.goBeforeImg(...e))},h)])]),(0,s._)("div",y,[(0,s._)("div",_,[I,(0,s.Uk)(" "+(0,i.zw)(l.status.productDetail.goodList?.[0].wname),1)]),b,(0,s._)("div",w,[k,(0,s._)("div",C,[(0,s._)("div",A,[H,(0,s._)("div",L,[(0,s.Wm)(q)])]),D,l.status.viewColorSize?((0,s.wg)(),(0,s.iD)("div",S,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.status.displayChoose,((e,a)=>((0,s.wg)(),(0,s.iD)("div",z,[(0,s._)("div",x,(0,i.zw)(e["name"]),1),(0,s._)("div",N,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(e["value"],((t,o)=>((0,s.wg)(),(0,s.iD)("div",{class:"item",onClick:s=>l.getChooseAttr(e,t,a,o,s),"data-skuId":t["skuId"]},[(0,s._)("a",{href:"javascript:void(0)",clstag:"shangpin|keycount|product|yanse-A9 4G黑色","data-skuId":t["skuId"]},[(0,s._)("img",{"data-img":"1",src:l.productDetailImg(o),width:"40",height:"40",alt:"A9 4G黑色"},null,8,P),(0,s._)("i",null,(0,i.zw)(t["content"]),1)],8,j)],8,U)))),256))])])))),256))])):(0,s.kq)("",!0),E,(0,s._)("div",W,[(0,s._)("div",Y,[(0,s.Wm)(J,{modelValue:l.num,"onUpdate:modelValue":a[5]||(a[5]=e=>l.num=e),min:1,max:10},{default:(0,s.w5)((()=>[(0,s.Uk)("adasd")])),_:1},8,["modelValue"])]),(0,s._)("a",{class:"car",onClick:a[6]||(a[6]=e=>l.addBuyCar(e))},[(0,s.Uk)("加入购物车 "),B,(0,s._)("span",F,"请先选着一个商品",512)])]),Z])])])],512)}t(7658),t(541);var J=t(5008),M=t(2483),O=t(6696),$=t(4870),K=(t(5240),t(7166)),V=t(65),G={name:"goodsDetail",components:{Header:J.Z,ElInputNumber:O.d6,MiniAddress:K.Z},setup(){(0,M.tv)();const e=(0,M.yj)(),a=(0,V.oR)(),t=(0,$.qj)({viewColorSize:!1,attr:[],productDetail:{},currentAttr:{shopId:"",discount:"三期分付",shopName:"",shopLogo:"",shopUrl:"",item:{},colorSize:{}},selector:{}}),i=(0,s.Fl)((()=>{let e=JSON.parse(localStorage.getItem("zoomList"));return e}));let l=(0,$.iH)(1),o=(0,$.iH)(),d=(0,$.iH)(),c=(0,$.iH)(),r=(0,$.iH)(),n=(0,$.iH)(),u=(0,$.iH)(),v=(0,s.Fl)((()=>a.state.detail.productDetail)),m=(0,s.Fl)((()=>a.state.detail.productPrice)),g=(0,s.Fl)((()=>a.state.detail.product)),p=(0,s.Fl)((()=>(console.log("page cumputed"),a.getters.doneShop)));function f(t,s){let i=e.query.searchKey;console.log(e.query);let l="https://item.jd.com/"+i+".html";a.dispatch("getDetail",{url:l}).then((e=>{console.log(e,"所有的action都已执行完毕")}))}function h(){a.dispatch("getPageDetail")}function y(){o.value.style.transform="translate(0px,0px)"}function _(){o.value.style.transform="translate(-300px,0px)"}function I(e){let a=e||window.event;if(a.target.getAttribute("src")){let e=a.target.getAttribute("src");d.value.firstElementChild.setAttribute("src",a.target.getAttribute("src")),r.value.style.backgroundImage=`url(${k(e)})`}}function b(e){let a=e||window.event;r.value.classList.add("active"),c.value.classList.add("active"),r.value.style.backgroundImage;let t=a.clientX-n.value.offsetLeft,s=a.clientY-n.value.offsetTop;t<=c.value.offsetWidth/2?t=c.value.offsetWidth/2:t>=d.value.offsetWidth-c.value.offsetWidth/2&&(t=d.value.offsetWidth-c.value.offsetWidth/2),s<=c.value.offsetHeight/2?s=c.value.offsetHeight/2:s>=d.value.offsetHeight-c.value.offsetHeight/2&&(s=d.value.offsetHeight-c.value.offsetHeight/2),c.value.style.left=t-100+"px",c.value.style.top=s-100+"px",r.left=-2*(t-100)+"px",r.top=-2*(s-100)+"px",r.value.style.backgroundPosition=`${r.left} ${r.top}`}function w(e){e||window.event;r.value.classList.remove("active"),c.value.classList.remove("active")}function k(e){console.log("放大图片的地址",e);let a=e.split("/");a[3]="n0",a[4]="jfs";let t=a.join("/");return t}function C(e,a,s,l,o){a=(0,$.IU)(a),e=(0,$.IU)(e),t.displayChoose[s].choosed=!0,e.value.forEach(((e,a)=>{a!==l&&(e.display="unable")}));let d=a["content"],c=(0,$.IU)(t.selector);c[e["name"]]=a["content"];let r=t.attr[0].list;for(let t in c)r=r.filter((e=>{let a=Object.values(e),s=a.includes(c[t]);return!!s}));
//!!这里解构的spliter是个数值。放进去是个对象，需要把对象也结构了
t.currentAttr.item={price:t.currentAttr.item.price,...r},"颜色"==d&&(t.currentAttr.item.imageurl=i.value[0].img),o.stopPropagation();let n=o.composedPath().find((e=>/item/.test(e.className)));console.log(n,o.composedPath(),"default el ");let v=Array.from(n.parentElement.children);v.forEach(((e,a,t)=>{e.classList.remove("choosed")})),n.classList.add("choosed");for(let i of m.value){console.log(i,i.id,i["id"]);let e=i.id.split("_");(a["skuId"]=e[1])&&(t.currentAttr.item.price=i.p)}t.currentAttr.colorSize[String(e["name"])]=a["content"],t.currentAttr.item.wname=t.productDetail.goodList[l].wname||t.productDetail.goodList[0].wname,console.log(t.currentAttr.item),u.value.style.display="none"}function A(){var e;function a(a){let s=t.displayChoose.find((e=>0==e.choosed));if(s)console.log("请先选着一个商品"),u.value.style.display="block";else if(!e){if(t.currentAttr.item.num=l,localStorage.getItem("buyCarList")){let e=JSON.parse(localStorage.getItem("buyCarList"));e.unshift(t.currentAttr);let a=JSON.stringify(e);localStorage.setItem("buyCarList",a)}else{let e=JSON.stringify([t.currentAttr]);localStorage.setItem("buyCarList",e)}a.target.firstElementChild.classList.add("animate__fadeInUp"),e=setTimeout((()=>{e=null,a.target.firstElementChild.classList.remove("animate__fadeInUp")}),3e3)}}return a}(0,s.wF)((()=>{new Promise(f),h()})),(0,s.bv)((()=>{let e=k(i.value[0].img);r.value.style.backgroundImage=`url(${e})`})),(0,s.YP)(g,(()=>{if(g.value.colorSize){t.viewColorSize=!0,t.attr.push({tittle:"颜色与尺寸",list:g.value.colorSize});let e=(0,$.IU)(g.value.colorSize),a=[];for(let t in e[0])if("skuId"!==t){let s={name:t,value:[],choosed:!1};for(let a of e){let e=s.value.find((e=>e["content"]==a[t]));e||s.value.push({content:a[t],display:"able"})}a.push(s)}t.displayChoose=a}})),(0,s.YP)(v,(()=>{200==v.value.code&&(t.productDetail["goodList"]=v.value.shopRec.goodList)})),(0,s.YP)(p,(()=>{p&&(t.currentAttr.shopId=p.value.shopId,t.currentAttr.shopName=p.value.name,t.currentAttr.shopUrl=p.value.shopUrl,t.currentAttr.shopLogo=p.value.shopLogo,t.currentAttr.imageurl=i.value[0].img)})),(0,s.YP)(m,(()=>{m.value&&(t.currentAttr.item.price=m.value[0].p)}));let H=A();function L(e){if(0!==t.productDetail.length){let a=(0,$.IU)(t.productDetail.goodList);if(a)return/360buyimg/.test(a[0]["imageurl"])?a[0]["imageurl"]:`//img13.360buyimg.com/n9/s40x40_${a[e].imageurl}`}}return{num:l,imgUl:o,zoomList:i,pageDetail:p,status:t,goNextImg:y,goBeforeImg:_,getZoomImg:I,getHuge:b,outHuge:w,getHugeImgSrc:k,getChooseAttr:C,addBuyCar:H,productDetailImg:L,Nodezoom:d,NodeHuge:c,nodeSpan:u,nodeHugeImg:r,nodeContainer:n,product:g,productDetail:v,productPrice:m}}},R=t(89);const T=(0,R.Z)(G,[["render",q],["__scopeId","data-v-4ac341e7"]]);var X=T}}]);
//# sourceMappingURL=222.2b1a0040.js.map