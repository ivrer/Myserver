"use strict";(self["webpackChunkmy_shp"]=self["webpackChunkmy_shp"]||[]).push([[492],{492:function(t,e,n){n.r(e),n.d(e,{default:function(){return z}});var s=n(3396),o=n(7139);const i=t=>((0,s.dD)("data-v-f98f5788"),t=t(),(0,s.Cn)(),t),a={key:0,class:"register-container"},l={class:"register"},p=i((()=>(0,s._)("h3",null,[(0,s.Uk)("注册新用户 "),(0,s._)("span",{class:"go"},[(0,s.Uk)("我有账号，去 "),(0,s._)("a",{href:"login.html",target:"_blank"},"登陆")])],-1))),u={action:"http://localhost:8080/proxy/register",ref:"node_form",method:"post"},r={class:"input_comonents"},c={class:"indentify_code_wrap"},_={class:"btn_wrap"},d=["onClick"],m={class:"timing_wrap"},w=i((()=>(0,s._)("em",null,"s",-1))),g={class:"btn"};function v(t,e,n,i,v,f){const y=(0,s.up)("Mini_input");return(0,s.wg)(),(0,s.iD)(s.HY,null,[((0,s.wg)(),(0,s.iD)("div",a,[(0,s._)("div",l,[p,(0,s._)("form",u,[(0,s._)("div",r,[(0,s.Wm)(y,{options:i.input_options.account},null,8,["options"]),(0,s.Wm)(y,{options:i.input_options.password,onGet_password:i.get_password},null,8,["options","onGet_password"]),(0,s.Wm)(y,{options:i.input_options.tel},null,8,["options"]),(0,s.Wm)(y,{options:i.input_options.check_password},null,8,["options"]),(0,s.Wm)(y,{options:i.input_options.email},null,8,["options"]),(0,s.Wm)(y,{options:i.input_options.indentify,onPub:i.havetry},{indentify_code:(0,s.w5)((t=>[(0,s._)("div",c,[(0,s._)("div",_,[(0,s._)("button",{type:"button",onClick:e=>t.reqIndentify()},(0,o.zw)(t.title),9,d)]),(0,s._)("div",m,[(0,s._)("span",null,(0,o.zw)(t.time),1),w])])])),_:1},8,["options","onPub"])]),(0,s._)("div",g,[(0,s._)("button",{type:"button",onClick:e[0]||(e[0]=t=>i.reqSubmit(t))},(0,o.zw)(i.title),1),(0,s._)("span",null,(0,o.zw)(i.attention),1)])],512)])])),(0,s.kq)("",!0)],64)}var f=n(4870),y=n(9242);const x={class:"container_wrap"},h=(0,s._)("i",null,"：",-1),k={class:"input_wrap"},b=["type","required","placeholder","name"];var R={__name:"mini_input",props:["options"],emits:["get_password"],setup(t,{emit:e}){const n=t;let i=n.options,a=(0,f.iH)(),l=(0,f.iH)(),p=(0,f.iH)(60),u=(0,f.iH)("发送验证"),r=(0,f.iH)(""),c=(0,f.qj)({}),_=()=>{if(i.RegExp_test){let t=i.RegExp,e=t.test(a.value);e?c.a="":""!==a.value?(c.a="attention",r.value=`${i.title}${i.RegExp_context}`):i.must&&(c.a="attention",r.value="此项必须填写")}};function d(t){l.value.type="visible"==t.target.className?"password":"text",t.target.className="visible"==t.target.className?"unvisible":"visible"}let m=(t,e)=>{let n=null;return s=>{n||(n=setTimeout((()=>{clearTimeout(n),n=null}),e),t(s))}},w=()=>{let t=setInterval((()=>{p.value=p.value-1,p.value<=0&&(clearInterval(t),t=null,u.value="再次发送")}),1e3)},g=m(w,6e4);return(t,e)=>((0,s.wg)(),(0,s.iD)("div",x,[(0,s._)("span",{class:(0,o.C_)((0,f.SU)(i).must?"have":"no")},[(0,s._)("em",null,(0,o.zw)((0,f.SU)(i).title),1),h],2),(0,s._)("div",k,[(0,s.wy)((0,s._)("input",{type:(0,f.SU)(i).type,required:(0,f.SU)(i).must,ref_key:"node_input",ref:l,placeholder:`请输入你的${(0,f.SU)(i).title}`,"onUpdate:modelValue":e[0]||(e[0]=t=>(0,f.dq)(a)?a.value=t:a=t),name:(0,f.SU)(i).name,onBlur:e[1]||(e[1]=t=>(0,f.SU)(_)(t))},null,40,b),[[y.YZ,(0,f.SU)(a)]]),(0,f.SU)(i).RegExp_test?((0,s.wg)(),(0,s.iD)("a",{key:0,href:"javaScript:void(0);",class:(0,o.C_)((0,f.SU)(c).a)},(0,o.zw)((0,f.SU)(r)),3)):(0,s.kq)("",!0),"password"==(0,f.SU)(i).type?((0,s.wg)(),(0,s.iD)("span",{key:1,class:"unvisible",onClick:e[2]||(e[2]=t=>d(t))})):(0,s.kq)("",!0)]),(0,s.WI)(t.$slots,"indentify_code",{time:(0,f.SU)(p),reqIndentify:(0,f.SU)(g),title:(0,f.SU)(u)})]))}};const E=R;var S=E,U={name:"Register",components:{Mini_input:S},setup(){let t=(0,f.qj)({account:{type:"text",name:"account",title:"用户名",RegExp_test:!0,RegExp:/^[a-zA-Z0-9]\w{5,16}$/,RegExp_context:"必须为8-16位字母或数字下划线组成",must:!0},password:{type:"password",name:"password",title:"密码",RegExp_test:!0,RegExp:/^[a-zA-Z0-9]\w{5,16}$/,RegExp_context:"必须为8-16位字母或数字下划线组成",must:!0},check_password:{type:"password",name:"check_password",title:"确认密码",RegExp_test:!0,RegExp:/^[a-zA-Z0-9]\w{5,16}$/,RegExp_context:"必须为8-16位字母或数字下划线组成",must:!0},tel:{type:"text",name:"tel",title:"手机号",RegExp_test:!0,RegExp:/^[0-9]{8,13}$/,RegExp_context:"输入不正确",must:!0},email:{type:"text",title:"邮箱",name:"email",RegExp_test:!0,RegExp:/^\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/,RegExp_context:"输入不正确",must:!1},indentify:{type:"text",name:"indentify",title:"验证码",RegExp_test:!1,must:!0}}),e=(0,f.iH)(),n=(0,f.iH)(""),s=(0,f.iH)("点击注册");function o(t){console.log(t)}let i=t=>{new FormData(e.value)},a=new WeakMap,l=o=>{let i=o||window.event,l=e.value,p=new FormData(e.value),u=a.get(l);const r=new AbortController;if(p.get("check_password")!==p.get("password"))return n.value="确认密码输入不正确",null;for(let e in t)if(t[e].must&&""==p.get(t[e].name))return n.value="请填入必填项",null;console.log(u,Boolean(u)),u&&u.abort(),fetch(l.action,{method:l.method,body:p,signal:r.signal}).then((async t=>{if(t.ok&&200==t.status){let e=await t.clone().json();return a.delete(l),s.value="注册成功",e}return Promise.reject(t)})).catch((t=>{console.log(t)})),a.set(l,r),s.value="注册中....",i.preventDefault()};return{input_options:t,attention:n,havetry:o,get_password:i,node_form:e,reqSubmit:l,title:s}}},q=n(89);const C=(0,q.Z)(U,[["render",v],["__scopeId","data-v-f98f5788"]]);var z=C}}]);
//# sourceMappingURL=492.a9d2be1c.js.map